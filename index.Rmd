---
title: "Stay safe!<br>Mapping the crime events in Buffalo, NY (2010-2020)"
author: "Wei Liu"
subtitle: "Explore the spatiotemporal pattern of crime events in the City of Buffalo, New York, USA"
---

# Introduction

Crime, as what it always appears to be, is the negative power in our society that tends to trigger multiple problems. With the increasing demand for higher quality of life in the modern world, the general public attaches more attention to the safety of the living environment as one of the basic factors considered. There has been considerable effort extended to exploring and understanding the pattern of various types of crimes. There exists a sub-field, namely, geographic profiling, which is the marginal subject of criminology and geography, looking into the crime events with both the theoretical basics from criminology and spatial methodologies from geography, with the ultimate goal of promoting suggestions for reducing crime rates and maintaining social safety.  
  
In this project, we want to reveal and understand the spatiotemporal distribution of crime incidents in Buffalo, New York. We are going to achieve our objective mainly by visualization of the crime incidents over time as well as over the study region. Besides, we also want to detect the relationship between crime and corresponding sociodemographic attributes in each defined area. The contribution of this project can be three-folded:  

&nbsp; &nbsp; &nbsp; &nbsp; Firstly, we analyze the pattern of crime incidents in Buffalo, NY from multiple dimensions through innovative approaches.<br>
&nbsp; &nbsp; &nbsp; &nbsp; Secondly, we further explore the potential mechanism behind the scene which may play a role in the formation of crime incidents.<br>
&nbsp; &nbsp; &nbsp; &nbsp; Thirdly, based on the aforementioned results, we are able to provide useful suggestions for promoting overall social safety.<br>


# Data and methods

## Data

1. Crime incidents

&nbsp; &nbsp; &nbsp; &nbsp; The csv file of crime incidents is in the public domain, available from the website of Open Data Portal of the City of Buffalo.

2. Census Block 2010 of the City of Buffalo

&nbsp; &nbsp; &nbsp; &nbsp; The Census Block 2010 data is available from Buffalo Open Data Portal. Census blocks are statistical areas bounded by visible features such as roads, streams, and railroad tracks, and by nonvisible boundaries such as property lines, city, township, school district, county limits and short line-of-sight extensions of roads.

3. Sociodemographic data

&nbsp; &nbsp; &nbsp; &nbsp; The sociodemographic data comes from the API of tidycensus.

## Methods

The major method utilized in this project is visualization. And the visualization consists of two main parts. Firstly, we create static and dynamic plots to show the changing behaviors of crime incidents from 2010 to 2020. Secondly, we create an interactive map that depicts the spatial distribution of the crime incidents in Buffalo, NY. Finally, using data in 2019 as an example, we reveal the probable relationship between crime incidents and sociodemographic attributes by calculating the correlation coefficients.

# Process

## Load needed packages

```{r, message=FALSE, results='hide'}
# needed packages
library(readr)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(ggrepel)
library(chron)
library(lubridate)
library(gganimate)
library(viridis)
library(GISTools)
library(tidycensus)
```

## Data collection and preprocessing

### Crime incidents

Firstly, we download the crime incidents data from Buffalo Open Data Portal.
  
```{r, message=FALSE, results='hide'}
crime_original = read_csv("https://data.buffalony.gov/api/views/d6g9-xbgu/rows.csv?accessType=DOWNLOAD")
```

secondly, we preprocess the crime incidents data.
```{r, message=FALSE, results='hide'}
crime_2010 <- crime_original %>%
  # For the column of incident_type_primary, change all letters into lower cases (e.g., Assault and ASSAULT are actually the same type of crime.)
  mutate(incident_type_primary = tolower(incident_type_primary)) %>%
  # the column of incident_datetime has 5 NA, so we fill them with the values in the column of create_at respectively.
  mutate(incident_datetime = ifelse(is.na(incident_datetime), created_at, incident_datetime)) %>%
  # change the column of incident_datetime into a standard date-time format.
  mutate(incident_datetime = parse_date_time(incident_datetime, '%m/%d/%Y %I:%M:%S %p')) %>%
  # filter by date and time (crimes recorded between 2010 and 2020)
  filter(incident_datetime >= as.POSIXct("2010-01-01 00:00:00")) %>%
  filter(incident_datetime < as.POSIXct("2021-01-01 00:00:00")) %>%
  # extract year and hour from the column of incident_datetime
  mutate(incident_year = format(incident_datetime, "%Y")) %>%
  mutate(incident_hour = format(incident_datetime, "%H")) %>%
  # drop those records that do not contain the coordinate information
  drop_na(latitude)
```

### Crime incidents